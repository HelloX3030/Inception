# =========================
# Basic server settings
# =========================
# Use IPv6 listener (dual-stack: IPv6 + IPv4)
listen=NO
listen_ipv6=YES

# =========================
# Authentication
# =========================
anonymous_enable=NO
local_enable=YES
write_enable=YES

# =========================
# Chroot & filesystem
# =========================
chroot_local_user=YES
allow_writeable_chroot=YES

local_umask=022
local_root=/var/www/html

# =========================
# Passive mode (Docker-safe, IPv6-compatible)
# =========================
pasv_enable=YES
pasv_min_port=21000
pasv_max_port=21010

# Allow extended passive mode (required for IPv6 clients)
epsv_enable=YES

# IMPORTANT:
# Do NOT set pasv_address for IPv6.
# vsftpd will advertise the correct address automatically.

# =========================
# Security hardening
# =========================
seccomp_sandbox=NO

# =========================
# FTPS (TLS encryption)
# =========================
ssl_enable=YES

allow_anon_ssl=NO
force_local_logins_ssl=YES
force_local_data_ssl=YES

rsa_cert_file=/etc/vsftpd/certs/ftp.crt
rsa_private_key_file=/etc/vsftpd/certs/ftp.key

ssl_sslv2=NO
ssl_sslv3=NO

# REQUIRED for Docker / NAT
require_ssl_reuse=NO

ssl_ciphers=HIGH

# =========================
# Command restrictions
# =========================
cmds_allowed=ABOR,CWD,LIST,MDTM,MKD,NLST,PASS,PASV,PORT,PWD,QUIT,RETR,STOR,TYPE,USER,EPSV,EPRT
